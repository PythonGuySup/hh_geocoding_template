# Отчет о производительности алгоритмов

### Полученные данные о производительности алгоритмов:
#### 1 запуск
| Алгоритм              | Количество данных | Время работы (мс) |
|-----------------------|-------------------|-------------------|
| SimpleQueryGeocoder   | 10                | 3980.00           |
| SimpleTreeGeocoder    | 10                | 44.83             |
| SimpleTreeGeocoder    | 1000              | 645.44            |
| SimpleTreeGeocoder    | 10000             | 8980.00           |
| SimpleTreeGeocoder    | 148000            | 61010.00          |
| MemorizedTreeGeocoder | 10                | 22.36             |
| MemorizedTreeGeocoder | 1000              | 17.51             |
| MemorizedTreeGeocoder | 10000             | 20.71             |
| MemorizedTreeGeocoder | 148000            | 48.68             |

![график_1.png](график_1.png)
#### 2 запуск
| Алгоритм              | Количество данных | Время работы (мс) |
|-----------------------|-------------------|-------------------|
| SimpleQueryGeocoder   | 10                | 3560.00           |
| SimpleTreeGeocoder    | 10                | 17.00             |
| SimpleTreeGeocoder    | 1000              | 657.72            |
| SimpleTreeGeocoder    | 10000             | 8430.00           |
| SimpleTreeGeocoder    | 148000            | 68740.00          |
| MemorizedTreeGeocoder | 10                | 11.92             |
| MemorizedTreeGeocoder | 1000              | 14.55             |
| MemorizedTreeGeocoder | 10000             | 28.47             |
| MemorizedTreeGeocoder | 148000            | 67.24             |

![график_2.png](график_2.png)
#### 3 запуск
| Алгоритм              | Количество данных | Время работы (мс) |
|-----------------------|-------------------|-------------------|
| SimpleQueryGeocoder   | 10                | 3420.00           |
| SimpleTreeGeocoder    | 10                | 6.59              |
| SimpleTreeGeocoder    | 1000              | 320.60            |
| SimpleTreeGeocoder    | 10000             | 2730.00           |
| SimpleTreeGeocoder    | 148000            | 41200.00          |
| MemorizedTreeGeocoder | 10                | 6.52              |
| MemorizedTreeGeocoder | 1000              | 6.72              |
| MemorizedTreeGeocoder | 10000             | 8.00              |
| MemorizedTreeGeocoder | 148000            | 79.78             |

![график_3.png](график_3.png)
#### 4 запуск. Увеличенная выборка
| Алгоритм              | Количество данных | Время работы (мс) |
|-----------------------|-------------------|-------------------|
| SimpleQueryGeocoder   | 10                | 3420.00           |
| SimpleQueryGeocoder   | 25                | 11500.00          |
| SimpleQueryGeocoder   | 50                | 14610.00          |
| SimpleQueryGeocoder   | 70                | 19830.00          |
| SimpleTreeGeocoder    | 10                | 5.24              |
| SimpleTreeGeocoder    | 100               | 23.81             |
| SimpleTreeGeocoder    | 1000              | 181.37            |
| SimpleTreeGeocoder    | 2000              | 376.81            |
| SimpleTreeGeocoder    | 4000              | 776.68            |
| SimpleTreeGeocoder    | 5000              | 950.66            |
| SimpleTreeGeocoder    | 6000              | 1180.00           |
| SimpleTreeGeocoder    | 10000             | 2010.00           |
| SimpleTreeGeocoder    | 14000             | 2810.00           |
| SimpleTreeGeocoder    | 20000             | 3980.00           |
| SimpleTreeGeocoder    | 50000             | 10390.00          |
| SimpleTreeGeocoder    | 100000            | 21190.00          |
| SimpleTreeGeocoder    | 140000            | 29920.00          |
| MemorizedTreeGeocoder | 10                | 4.62              |
| MemorizedTreeGeocoder | 100               | 5.00              |
| MemorizedTreeGeocoder | 1000              | 3.51              |
| MemorizedTreeGeocoder | 2000              | 5.11              |
| MemorizedTreeGeocoder | 4000              | 4.56              |
| MemorizedTreeGeocoder | 5000              | 6.05              |
| MemorizedTreeGeocoder | 6000              | 5.56              |
| MemorizedTreeGeocoder | 10000             | 5.78              |
| MemorizedTreeGeocoder | 14000             | 11.30             |
| MemorizedTreeGeocoder | 20000             | 8.68              |
| MemorizedTreeGeocoder | 50000             | 16.86             |
| MemorizedTreeGeocoder | 100000            | 31.69             |
| MemorizedTreeGeocoder | 140000            | 44.33             |

![график_4.png](график_4.png)

#### 5 запуск. Только SimpleQueryGeocoder
| Алгоритм            | Количество данных | Время работы (мс) |
|---------------------|-------------------|-------------------|
| SimpleQueryGeocoder | 10                | 3050.0            |
| SimpleQueryGeocoder | 25                | 7570.0            |
| SimpleQueryGeocoder | 50                | 17000.0           |
| SimpleQueryGeocoder | 70                | 20850.0           |
| SimpleQueryGeocoder | 100               | 29760.0           |
| SimpleQueryGeocoder | 150               | 45080.0           |

![график_5.png](график_5.png)
### Анализ полученных данных

#### 1. Самым медленным из алгоритмов является алгоритм "в лоб" (SimpleQueryGeocoder)
Причина низкой производительности связана с использованием API hh.ru для получения каждой из вершин, составляющих искомую ветвь дерева(адрес).
Обращение к сетевым источникам данных всегда в разы медленнее, чем к внутренней памяти компьютера, так как, во-первых, полученные данные 
в любом случае должны быть загружены в ОЗУ перед началом работы, а во-вторых, данным, полученным через интернет, приходиться преодолеть несравнимо 
больший и комплексный путь, чем тем, что хранятся в ОЗУ компьютера. (отправка запроса на сервер, маршрутизация ip-пакетов, ожидание ответа от сервера и т.д.)

Таким образом, большую часть времени программе приходиться простаивать в ожидании следующей вершины, тогда как SimpleTreeGeocoder и MemorizedTreeGeocoder почти сразу 
переходят к ней.

#### 2. SimpleTreeGeocoder показал среднюю производительность (алгоритм Перебора дерева)

В отличие от SimpleQueryGeocoder, SimpleTreeGeocoder'у не требуется простаивать в ожидании данных - все древо адресов сразу загружается в память компьютера.
Однако для геокодирования id SimpleTreeGeocoder каждый раз "в лоб" перебирает всё дерево в поисках нужной вершины: для каждого id он начинает перебирать дерево с корня, много раз проходя одни и те же вершины.

Таким образом, алгоритм тратит много процессорного времени на повторный перебор всего дерева, что негативно сказывается на производительности.
Также стоит отметить, что данному алгоритму требуется дополнительная память под выгружаемое дерево адресов (увеличивается пространственная сложность).



#### 3. Самым быстрым алгоритмом оказался MemorizedTreeGeocoder (алгоритм Мемоизации дерева)

Учитывая недостатки SimpleQueryGeocoder и SimpleTreeGeocoder, MemorizedTreeGeocoder показывает лучшую производительность:
- Во-первых, алгоритм не тратит время на ожидание вершин от API, так как все дерево сразу загружается в память.
- Во-вторых, алгоритм, собирая при переборе дерева для всех вершин полный адрес и запоминая его с помощью словаря, избавляется от необходимости повторного перебора дерева: 
достаточно один раз пройти все дерево, чтобы иметь доступ к адресу любой из вершин. При этом временная сложность доступа значения по ключу для словаря составляет O(1), что обеспечивает почти мгновенный доступ к любой вершине.

Таким образом, алгоритм добивается максимальной оптимизации использования процессорного времени. (но требует выделения дополнительной памяти под словарь и дерево адресов)

### 4. Анализ графиков
Представленные выше графики наглядно демонстрируют разницу в производительности алгоритмов:
- график MemoryTreeGeocoder - почти плоский, параллельный оси Ox, аппроксимируя его, можно сказать что скорость работы алгоритма - константная 
- график SimpleTreeGeocoder - постепенно растет по мере увеличения количества id, скорость работы алгоритма ~ линейная
- график SimpleQueryGeocoder - возрастает намного быстрее, чем график SimpleQueryTreeGeocoder, скорость работы алгоритма ~ полиномиальная

### Итог

Анализ приведенных алгоритмов демонстрирует важность выбора наиболее эффективного алгоритма в контексте решаемой задачи. Хоть наивный алгоритм легко запрограммировать, но для большинства задач он не применим: чтобы геокодировать даже 1000 id нам потребуются сутки! 
С другой стороны, MemorizedTreeGeocoder геокодирует сотни тысяч id за несколько миллисекунд, однако ему требуется сравнительно много дополнительной памяти для работы. А что если мы ограничены в памяти? Тогда мы можем использовать SimpleTreeGeocoder в качестве компромиссного варианта или 
SimpleQueryGeocoder, если мы собираемся геокодировать небольшие объемы данных. 

Это приводит нас к необходимости уметь оценивать сложность работы алгоритма (временную и пространственную), но так как каждый раз опытным путем анализировать производительность алгоритма - неудобно и не всегда возможно, то для описания сложности алгоритмов предпочтительным вариантом является использование big O notation (асимптотической оценки).